#!/bin/bash
#####################################################
# This GMT script plots an E-W  slice through a
# layered velocity model. Requires input to be
# generated by program "gmtslice".
#####################################################
#
# Open bounds file and read in variables
#
filename='boundew.gmt'
n=1
while read line; do
bds[n]=$line
n=$((n+1))
done < $filename
#
bounds="-R${bds[1]}/${bds[2]}/${bds[3]}/${bds[4]}"
proj="-JX8.0i/2.6i"
psfile="gmtslice.ps"
#
gmt gmtset FONT_ANNOT 14p,Helvetica
#
# The first step is to plot on the velocity field and scale bar
#
gmt xyz2grd grid2dvew.z -Ggrid2dvew.grd -I${bds[5]}+/${bds[6]}+ -ZLB $bounds
gmt grdimage grid2dvew.grd $bounds $proj -Ba1.0f0.50/a40f10 -Cvelrelative.cpt -K -P > $psfile
gmt psscale -Cvelrelative.cpt -Ba0.5f0.2  -D9.9/9.1/12.0/0.6h -O -K -P >> $psfile
#
# Plot interfaces.
#
gmt psxy intew.xy $bounds $proj -W7/0/0/0 -O -K -P >> $psfile
#
# Plot ray paths, sources and receivers.
#
gmt psxy raysew.xy $bounds $proj -W2/0/0/0 -O -K -P >> $psfile
gmt psxy sourcesew.xy $bounds $proj -Sa0.40 -Gred -N -W2/0/0/0 -O -K -P >> $psfile
gmt psxy receiversew_old.xy $bounds $proj -Sc0.20 -Gred -N -W2/0/0/0 -O -K -P >> $psfile
gmt psxy receiversew.xy $bounds $proj -Si0.20 -Gblue -N -W2/0/0/0 -O -P >> $psfile
